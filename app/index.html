<!DOCTYPE html>
<html>
<head>
  <title>Perl Maven's view of CPAN</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/handlebars.js/3.0.2/handlebars.min.js"></script>
  <script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
  <script src="/metacpan.js"></script>
  <link rel="stylesheet" href="style.css">

<script id="error-template" type="text/x-handlebars-template">
  Error. {{code}}
</script>

<script id="release-template" type="text/x-handlebars-template">
  <div class="entry">
    <h2><a href="#" class="author" data-author="{{result.author}}">{{result.author}}</a> {{result.name}} {{result.date}}</h2>
  </div>
  <div class="repository">
    <a target="_blank" href="{{result.resources.repository.web}}">{{result.resources.repository.type}}</a>
  </div>

  {{#unless result.authorized}}
    <div class="warn">Unauthorized release</div>
  {{/unless}}

  <div class="license">
     License: {{result.license}}
  </div>

  <h2>Provides</h2>
  {{#each result.provides}}
      <a href="#" class="module">{{this}}</a><br>
  {{/each}}

</script>

<script id="home-template" type="text/x-handlebars-template">
  <h2>Perl Maven's view of CPAN</h2>
</script>



<script id="recent-template" type="text/x-handlebars-template">
  <ul>
    {{#each result.hits.hits}}
      <li>
        <a href="#" class="release" data-distribution="{{fields.distribution}}">{{fields.name}}</a><br>
        {{fields.abstract}}<br>
        {{fields.date}}<br>
        {{#iff fields.status '!=' 'latest'}}<b>{{fields.status}}</b>{{/iff}}<br>
      </li>
    {{/each}}
  </ul>

</script>


<script id="author-template" type="text/x-handlebars-template">
  <h2>{{result.name}} ({{result.pauseid}})</h2>
  <img src="{{result.gravatar_url}}" alt="{{result.name}}" /><br>
  {{#each result.website}}
    <a target="_blanket" href="{{this}}">{{this}}</a><br>
  {{/each}}
  
  {{#if result.profile}}
    <h3>Profiles</h3>
    {{#each result.profile}}
       {{#if url}}
          <a target="_blank" href="{{url}}">{{name}}</a><br>
       {{else}}
          {{name}} {{id}}<br>
       {{/if}}
    {{/each}}
  {{/if}}

  {{#if result.blog}}
    <h3>Blog</h3>
    {{#each result.blog}}
       <a target="_blank" href="{{url}}">{{url}}</a> <a target="_blank" href="{{feed}}">feed</a><br>
    {{/each}}
  {{/if}}
</script>

<script id="leaderboard-template" type="text/x-handlebars-template">
  <h2>Leaderboard - Authors with Most Uploads</h2>
  <ul>
  {{#each result.facets.author.terms }}
    <li><a href="#" class="author" data-author="{{term}}" >{{term}}</a> {{count}}</li>
  {{/each}}
  </ul>
</script>

<script id="profiles-template" type="text/x-handlebars-template">
   <h2>Profile fields</h2>
   <ul>
   {{#each result.profiles}}
     <li><a href="#" class="profile" data-profile="{{@key}}">{{@key}}</a></li>
   {{/each}}
   </ul>
</script>

<script id="profile-template" type="text/x-handlebars-template">
   <h2>Users with {{query}} in their profile</h2>
   <ul>
     {{#each result.hits.hits}}
       <li><a href="#" class="author" data-author="{{this.fields.pauseid}}">{{this.fields.name}} ({{this.fields.pauseid}})</a> <a href="{{this.url}}" target="_blank">{{../query}}</a></li>
     {{/each}}
   </ul>

</script>


</head>
<body>

<a href="#" id="home">home</a> | <a href="#" id="recent">recent</a> | <a href="#" id="leaderboard">leaderboard</a> | <a href="#" id="profiles">profiles</a>

<p>Find a solution in Perl</p>
<p><input type="text" id="query"><button id="search">Search</button></p>
<hr>

<div id="result">
</div>


</body>
</html>

