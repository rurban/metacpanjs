<!DOCTYPE html>
<html>
<head>
  <title>METACPAN.js</title>
  <script src="/handlebars-v3.0.0.js"></script>
  <script src="/metacpan.js"></script>

<script id="release-template" type="text/x-handlebars-template">
  <div class="entry">
    <h2>{{author}} {{name}} {{date}}</h2>
  </div>
  <div class="repository">
    <a href="{{resources.repository.web}}">{{resources.repository.type}}</a>
  </div>
</script>


</head>
<body>

<p>Find a solution in Perl</p>
<p><input type="text" id="query"><button id="search">Search</button></p>
<hr>

<div id="result">
</div>

</body>
</html>

<script>

function display_result(query, result) {
    var source   = document.getElementById('release-template').innerHTML;
    var template = Handlebars.compile(source);
    //var context = {name: result["name"]};
    //var html    = template(context);
    var html    = template(result);
    document.getElementById('result').innerHTML = html;
}

function search() {
	var query = document.getElementById('query').value;
	metacpan.search(query, display_result);
}

//document.getElementById('query').addEventListener('keyup', search);
document.getElementById('search').addEventListener('click', search);
</script>
